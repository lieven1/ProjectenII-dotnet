@model Taijitan.Models.LesmomentViewModels.LesmomentAlgemeenViewModel

@{
    if (TempData.ContainsKey("error"))
    {
        <div class="alert alert-danger">
            @TempData["error"]
        </div>
    }
}

<h2>Sessie op @Model.Lesmoment.StartTijd.ToString("dd/MM/yyyy") om @Model.Lesmoment.StartTijd.ToString("HH:mm")</h2>
<div class="table col-md-12 text-center">
    <a asp-controller="Lesmoment" asp-action="RegistreerAanwezigheidProefles" asp-route-id="@Model.Lesmoment.LesmomentId" class="btn btn-info">Ik volg een proefles</a>
    @foreach (Taijitan.Models.Domain.Lesformule formule in Model.Lesformules)
    {
        var parms = new Dictionary<string, string> { { "lesmomentId", Model.Lesmoment.LesmomentId.ToString() }, { "lesformuleId", formule.Id.ToString() } };

        <a class="btn btn-default" asp-controller="Lesmoment" asp-action="gebruikersperformule" asp-all-route-data="parms">@formule.LesText</a>
    }
</div>

<h3>Aanwezigen</h3>
<table class="table table-striped">
    <thead class="bg-primary">
        <tr class="bg-primary">
            <td><b>Gebruikersnaam</b></td>
            <td><b>Voornaam</b></td>
            <td><b>Achternaam</b></td>
            <td></td>
        </tr>
    </thead>
    <tbody>
        @foreach (var item in Model.Lesmoment.Leden.OrderBy(l => l.Gebruikersnaam))
        {
            @if (item.Aanwezig)
            {
                var gebruikersnaam = item.Gebruikersnaam;
                if (item.Gebruiker.TypeGebruiker.Equals(Taijitan.Models.Domain.Enums.TypeGebruiker.Proefgebruiker))
                {
                    gebruikersnaam = "proefles";
                }

                <tr>
                    <td>@gebruikersnaam</td>
                    <td>@item.Gebruiker.Voornaam </td>
                    <td>@item.Gebruiker.Naam </td>
                    @{
                        var parms = new Dictionary<string, string> { { "gebruikersnaam", @item.Gebruiker.Gebruikersnaam } };
                    }
                    <td><a class="btn btn-default" asp-controller="Gebruiker" asp-action="Login" asp-all-route-data="parms">Leeromgeving</a></td>
                </tr>
            }
        }
    </tbody>
</table>
<div class="form-group col-md-12 text-center">
    <a asp-controller="Home" asp-action="Index" class="btn btn-default">Keer terug</a>
</div>